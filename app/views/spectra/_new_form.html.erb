<%= simple_form_for @spectrum, validate: true do |f| %>

  <div id="info" class="mb-8">
    <%= render Forms::SectionLabelComponent.new().with_content("Info") %>

    <div id="title" class="mb-4">
      <%= render Forms::LabelComponent.new(optional: false).with_content("Title") %>
      <%= render Forms::TextInputComponent.new(form: f, field: :title, required: true, placeholder: "Spectrum title") %>
    </div>

    <div class="mb-4">
      <%= render Forms::LabelComponent.new().with_content("Spectra files") %>
      <%= render Forms::FileInputComponent.new(form: f, field: :files, required: false, direct: true, multiple: true) %>
      <%= render Forms::PHelperComponent.new().with_content("Any plain text file format (.csv's are preferred).") %>
    </div class="mb-4">

    <div>
      <%= render Forms::LabelComponent.new().with_content("Processed csvs") %>
      <%= render Forms::FileInputComponent.new(form: f, field: :processed_csvs, required: false, direct: true, multiple: true) %>
    </div>

  </div>

  <div id="metadata">
    <%= render Forms::SectionLabelComponent.new().with_content("Metadata") %>
    <%= render Forms::LabelComponent.new().with_content("Metadata") %>
    <%= render Forms::TextInputComponent.new(form: f, as: :text, field: :metadata, required: false, placeholder: "Description to be displayed on object cards", data: { controller: "textarea", action: 'input->textarea#resize', 'textarea-target': 'input' }, v: JSON.is_json?(@spectrum.metadata) ? JSON.generate(@spectrum.metadata) : @spectrum.metadata) %>
    <%= render Forms::PHelperComponent.new().with_content("Must be a valid JSON object, prefer single-word keys ") %>
  </div>

  <div class="flex mt-4">
    <%= render Forms::SubmitComponent.new(form: f).with_content("Create") %>
    <%= render Forms::BackButtonComponent.new(path: (["new", "create"].include? params[:action]) ? :spectra : @spectrum).with_content("Back") %>
  </div>
<% end %>
