<%= render Sections::SectionComponent.new(cls: "!py-0") do %>
  <div class="py-24 px-4 mx-auto text-gray-700 sm:px-6 lg:px-8">

    <%= tag.div data: { controller: "tabs", tabs_active_class: "active-tab" } do %>
      <div class="grid grid-cols-12 max-w-screen-2xl mx-auto rounded-lg border shadow-md">

        <div class="col-span-3 w-full bg-white rounded-l-lg">
          <div class="flex justify-between">
            <ul class="flex flex-wrap w-full text-sm">
              <li class="w-full border-b">
                <div class="flex flex-col justify-center items-center h-16 text-lg font-medium">
                  <div class="flex space-x-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-test-pipe" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                      <path d="M20 8.04l-12.122 12.124a2.857 2.857 0 1 1 -4.041 -4.04l12.122 -12.124"></path>
                      <path d="M7 13h8"></path>
                      <path d="M19 15l1.5 1.6a2 2 0 1 1 -3 0l1.5 -1.6z"></path>
                      <path d="M15 3l6 6"></path>
                    </svg>
                    <span>
                      Sample
                    </span>
                  </div>
                </div>
              </li>
              <li class="w-full">
                <%= tag.div data: { "tabs-target": "tab" }, id: "info-tab", class: "active-tab hover:bg-gray-100" do %>
                  <button type="button" role="tab" aria-controls="info" aria-selected="true" class="inline-block p-4 w-full" data-action="click->tabs#switch">Info</button>
                <% end %>
              </li>
              <li class="w-full">
                <%= tag.div data: { "tabs-target": "tab" }, id: "info-tab", class: "hover:bg-gray-100" do %>
                  <button type="button" role="tab" aria-controls="info" aria-selected="true" class="inline-block p-4 w-full" data-action="click->tabs#switch">Files</button>
                <% end %>
              </li>
              <li class="w-full border-y">
                <div class="flex flex-col justify-center items-center h-16 text-lg font-medium">
                  <div class="flex space-x-2">

                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chart-histogram" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                      <path d="M3 3v18h18"></path>
                      <path d="M20 18v3"></path>
                      <path d="M16 16v5"></path>
                      <path d="M12 13v8"></path>
                      <path d="M8 16v5"></path>
                      <path d="M3 11c6 0 5 -5 9 -5s3 5 9 5"></path>
                    </svg>
                    <span>
                      Spectra
                    </span>

                  </div>
                </div>
              </li>
              <% unless @spectra.nil? %>
                <% @spectra.each do |spectrum| %>
                  <li class="w-full">
                    <%= tag.div data: { "tabs-target": "tab" }, id: "spectrum-#{spectrum.id}-tab", class: "hover:bg-gray-100" do %>
                      <div class="inline-block p-4 w-full text-center cursor-pointer" data-action="click->tabs#switch">
                        <%= spectrum.range.upcase %>, .<%= spectrum.format %>
                      </div>
                    <% end %>
                  </li>
                <% end %>
              <% end %>
            </ul>
          </div>
        </div>

        <div class="col-span-9 w-full bg-white rounded-r-lg border-l">

          <div id="sample" class="p-8 pt-4 border-b">
            <div class="flex justify-between">
              <div class="flex">

                <%= render SampleCategoryBadgeComponent.new(category: @sample.category, cls: "my-auto").with_content(@sample.category.humanize.downcase) %>
                <div class="my-auto mr-2 text-sm text-gray-500">
                  &middot;
                </div>
                <span class="my-auto mr-2 text-xs font-medium text-gray-500">
                  id: <%= @sample.id %>
                </span>
                <div class="my-auto mr-2 text-sm text-gray-500">
                  &middot;
                </div>
                <span class="my-auto mr-2 text-xs font-medium text-gray-500">
                  by
                  <%= link_to @sample.user, class: "hover:underline font-bold" do %>
                    <%= @sample.user.full_name %>
                  <% end %>
                </span>

              </div>
              <div id="controls" class="flex flex-row justify-center items-center mx-1 space-x-0">
                <%= render TooltipComponent.new(tooltip: "Edit", user: current_user) do %>
                  <%= link_to [:edit, @sample] do %>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="flex-shrink-0 my-auto w-5 h-5 text-gray-400">
                      <path d="M5.433 13.917l1.262-3.155A4 4 0 017.58 9.42l6.92-6.918a2.121 2.121 0 013 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 01-.65-.65z" />
                      <path d="M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0010 3H4.75A2.75 2.75 0 002 5.75v9.5A2.75 2.75 0 004.75 18h9.5A2.75 2.75 0 0017 15.25V10a.75.75 0 00-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5z" />
                    </svg>
                  <% end %>
                <% end %>

                <%= render TooltipComponent.new(tooltip: "Favorite", user: current_user) do %>
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="flex-shrink-0 w-5 h-5 text-gray-400">
                    <path d="M17 4.517v9.301L5.433 2.252a41.44 41.44 0 019.637.058C16.194 2.45 17 3.414 17 4.517zM3 17.25V6.182l10.654 10.654L10 15.082l-5.925 2.844A.75.75 0 013 17.25zM3.28 2.22a.75.75 0 00-1.06 1.06l14.5 14.5a.75.75 0 101.06-1.06L3.28 2.22z" />
                  </svg>
                <% end %>

                <%= render TooltipComponent.new(tooltip: "Delete", user: current_user) do %>
                  <%= link_to @sample, data: { turbo_method: :delete, turbo_confirm: "Are you sure ?" } do %>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="flex-shrink-0 w-5 h-5 text-gray-400">
                      <path fill-rule="evenodd" d="M7.22 3.22A.75.75 0 017.75 3h9A2.25 2.25 0 0119 5.25v9.5A2.25 2.25 0 0116.75 17h-9a.75.75 0 01-.53-.22L.97 10.53a.75.75 0 010-1.06l6.25-6.25zm3.06 4a.75.75 0 10-1.06 1.06L10.94 10l-1.72 1.72a.75.75 0 101.06 1.06L12 11.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L12 8.94l-1.72-1.72z" clip-rule="evenodd" />
                    </svg>
                  <% end %>
                <% end %>

                <%= tag.div data: { controller: "clipboard", action: "click->clipboard#copy" } do %>
                  <%= render TooltipComponent.new(tooltip: "Copy link", user: current_user) do %>
                    <%= link_to "", @sample, class: "hidden" , data: { "clipboard-target": "text" } %>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="flex-shrink-0 w-5 h-5 text-gray-400 transition" data-clipboard-target="svg">
                      <path d="M7 3.5A1.5 1.5 0 018.5 2h3.879a1.5 1.5 0 011.06.44l3.122 3.12A1.5 1.5 0 0117 6.622V12.5a1.5 1.5 0 01-1.5 1.5h-1v-3.379a3 3 0 00-.879-2.121L10.5 5.379A3 3 0 008.379 4.5H7v-1z" />
                      <path d="M4.5 6A1.5 1.5 0 003 7.5v9A1.5 1.5 0 004.5 18h7a1.5 1.5 0 001.5-1.5v-5.879a1.5 1.5 0 00-.44-1.06L9.44 6.439A1.5 1.5 0 008.378 6H4.5z" />
                    </svg>
                  <% end %>
                <% end %>
              </div>
            </div>
            <h2 class="mb-2 text-2xl font-semibold md:mt-2"> <%= @sample.title %></h2>
            <p class="mt-4 text-sm text-gray-500">
              <%= @sample.description.to_plain_text %>
            </p>
          </div>

          <div id="panels" class="rounded-br-lg">
            <%= tag.div data: { "tabs-target": "panel" }, id: "info-panel", class: "p-4 bg-white rounded-br-lg md:p-8 md:pt-4" do %>
              <%= render "sample_panel", sample: @sample %>
            <% end %>

            <%= tag.div data: { "tabs-target": "panel" }, id: "files-panel", class: "hidden p-4 bg-white rounded-br-lg md:p-8 md:pt-4" do %>
              <%= render "files_panel", sample: @sample %>
            <% end %>

            <% @spectra&.each do |spectrum| %>
              <%= tag.div data: { "tabs-target": "panel" }, id: "spectrum-#{spectrum.id}-panel", class: "hidden p-4 bg-white rounded-br-lg md:p-8 md:pt-4" do %>
                <%= render "spectrum_panel", spectrum: spectrum %>
              <% end %>
            <% end %>

          </div>

        </div>

      </div>
    <% end %>

  </div>
<% end %>
